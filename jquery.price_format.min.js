/*

* Price Format jQuery Plugin
* Created By Eduardo Cuducos
* Currently maintained by Flavio Silveira flavio [at] gmail [dot] com
* Version: 2.0
* Release: 2014-01-26

*/
!function(t){t.fn.priceFormat=function(n){var n=t.extend(!0,{},t.fn.priceFormat.defaults,n)
return this.each(function(){function r(t){p.is("input")?p.val(t):p.html(t)}function i(){return m=p.is("input")?p.val():p.html()}function e(t){for(var n="",r=0;r<t.length;r++)char_=t.charAt(r),0==n.length&&0==char_&&(char_=!1),char_&&char_.match(v)&&(b?n.length<b&&(n+=char_):n+=char_)
return n}function a(t){for(;t.length<S+1;)t="0"+t
return t}function f(n,r){if(!r&&(""===n||n==f("0",!0))&&w)return""
var i=a(e(n)),c="",u=0
0==S&&(g="",o="")
var o=i.substr(i.length-S,S),s=i.substr(0,i.length-S)
if(i=0==S?s:s+g+o,x||""!=t.trim(x)){for(var h=s.length;h>0;h--)char_=s.substr(h-1,1),u++,u%3==0&&(char_=x+char_),c=char_+c
c.substr(0,1)==x&&(c=c.substring(1,c.length)),i=0==S?c:c+g+o}return!O||0==s&&0==o||(i=-1!=n.indexOf("-")&&n.indexOf("+")<n.indexOf("-")?"-"+i:P?"+"+i:""+i),d&&(i=d+i),_&&(i+=_),i}function c(t){var n=t.keyCode?t.keyCode:t.which,i=String.fromCharCode(n),e=!1,a=m,c=f(a+i);(n>=48&&57>=n||n>=96&&105>=n)&&(e=!0),8==n&&(e=!0),9==n&&(e=!0),13==n&&(e=!0),46==n&&(e=!0),37==n&&(e=!0),39==n&&(e=!0),!O||189!=n&&109!=n&&173!=n||(e=!0),!P||187!=n&&107!=n&&61!=n||(e=!0),e||(t.preventDefault(),t.stopPropagation(),a!=c&&r(c))}function u(){var t=i(),n=f(t)
t!=n&&r(n),t==="0"+g+"0"&&n==f("0",!0)&&w&&r("")}function o(){p.val(d+i())}function s(){p.val(i()+_)}function h(){if(""!=t.trim(d)&&y){var n=i().split(d)
r(n[1])}}function l(){if(""!=t.trim(_)&&k){var n=i().split(_)
r(n[0])}}var p=t(this),m="",v=/[0-9]/
m=p.is("input")?p.val():p.html()
var d=n.prefix,_=n.suffix,g=n.centsSeparator,x=n.thousandsSeparator,b=n.limit,S=n.centsLimit,y=n.clearPrefix,k=n.clearSuffix,O=n.allowNegative,P=n.insertPlusSign,w=n.clearOnEmpty
P&&(O=!0),p.bind("keydown.price_format",c),p.bind("keyup.price_format",u),y&&(p.bind("focusout.price_format",function(){h()}),p.bind("focusin.price_format",function(){o()})),k&&(p.bind("focusout.price_format",function(){l()}),p.bind("focusin.price_format",function(){s()})),i().length>0&&(u(),h(),l())})},t.fn.unpriceFormat=function(){return t(this).unbind(".price_format")},t.fn.unmask=function(){var n,r=""
n=t(this).is("input")?t(this).val():t(this).html()
for(var i in n)isNaN(n[i])&&"-"!=n[i]||(r+=n[i])
return r},t.extend(t.fn.priceFormat,{defaults:{prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:!1,centsLimit:2,clearPrefix:!1,clearSufix:!1,allowNegative:!1,insertPlusSign:!1,clearOnEmpty:!1}})}(jQuery)
